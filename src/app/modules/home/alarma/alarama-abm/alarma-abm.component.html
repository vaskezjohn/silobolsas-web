<div>
  <h1 mat-dialog-title>{{editMode ? "Editar rango de la " : "Nueva" }} Alarma</h1>
  <div mat-dialog-content>
      <div style="display: flex;flex-direction: column; margin:1rem auto; max-width: 600px; padding: 1rem;">
          <form [formGroup]="form">

            <mat-form-field>
              <mat-label>Grano</mat-label>
              <mat-select [(ngModel)]="alarma.granosID"  formControlName="granos"   (selectionChange)="controlarRepetido()">
                <mat-option *ngFor="let grano of granos" [value]="grano.ID">
                    {{grano.descripcion}}
                </mat-option>

                <mat-error *ngIf="form.controls['granos'].hasError('required')">
                  El grano es <strong>requerido</strong>
                </mat-error>
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Unidad medida</mat-label>
              <mat-select [(ngModel)]="alarma.unidadesMedidasID"  formControlName="unidadesMedidas"  (selectionChange)="controlarRepetido()" >
                <mat-option *ngFor="let unidadMedida of unidadesDeMedida" [value]="unidadMedida.id">
                    {{unidadMedida.descripcion}}
                </mat-option>

                <mat-error *ngIf="form.controls['unidadesMedidas'].hasError('required')">
                  La unidad de medida es <strong>obligatoria</strong>
                </mat-error>
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Color</mat-label>
              <mat-select [(ngModel)]="alarma.coloresID"  formControlName="colores"   >
                <mat-option *ngFor="let color of colores" [value]="color.id">
                    {{color.descripcion}}
                </mat-option>

                <mat-error *ngIf="form.controls['colores'].hasError('required')">
                  El color es <strong>requerido</strong>
                </mat-error>
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <input matInput [(ngModel)]="alarma.minimo" formControlName="minimo" type="number" placeholder="Mínimo" (focusout)="controlarRepetido()">
              <mat-error *ngIf="form.controls['minimo'].hasError('required')">
                  El mínimo es <strong>requerido</strong>
              </mat-error>
            </mat-form-field>

            <mat-form-field>
              <input matInput [(ngModel)]="alarma.maximo" formControlName="maximo" type="number" placeholder="Máximo"  (focusout)="controlarRepetido()">
              <mat-error *ngIf="form.controls['maximo'].hasError('required')">
                  El máximo es <strong>requerido</strong>
              </mat-error>
            </mat-form-field>

            <mat-form-field>
              <input matInput [(ngModel)]="alarma.descripcion" formControlName="descripcion" type="text" placeholder="Descripción">
              <mat-error *ngIf="form.controls['descripcion'].hasError('required')">
                  La descripción es <strong>requerida</strong>
              </mat-error>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Tipo de notificación</mat-label>
              <mat-select [(ngModel)]="alarma.tiposNotificacionesID"  formControlName="tiposDeNotificacion"   >
                <mat-option *ngFor="let notificacion of notificaciones" [value]="notificacion.id">
                    {{notificacion.descripcion}}
                </mat-option>

                <mat-error *ngIf="form.controls['tiposDeNotificacion'].hasError('required')">
                  La notificacion es <strong>requerida</strong>
                </mat-error>
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Destinatario</mat-label>
              <mat-select [(ngModel)]="alarma.usuarioDestinoID"  formControlName="usuarios"   >
                <mat-option *ngFor="let usuario of usuarios" [value]="usuario.id">
                    {{usuario.email}}
                </mat-option>

                <mat-error *ngIf="form.controls['usuarios'].hasError('required')">
                  El Destinatario es <strong>requerido</strong>
                </mat-error>
              </mat-select>
            </mat-form-field>

          </form>
      </div>
  </div>
  <div mat-dialog-actions>
      <button mat-raised-button color="primary" [disabled]="form.invalid" type="submit"
          (click)="onSubmit()">Confirmar</button>
      <button mat-raised-button color="warn" (click)="cancelar()">Cancelar</button>
  </div>
</div>
